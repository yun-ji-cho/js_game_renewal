<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, width=device-width, user-scalable=yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no"/>
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css">
    <style>
        .main {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        .video {
            position: relative;
            width: 100%;
            height: 0;
            padding-top: 56.25%;
        }

        .video iframe {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>

<div class="main">
    <div class="video">
        <!-- enablejsapi=1&amp;version=3&amp;playerapiid=ytplayer 넣어줘야 api 실행 -->
        <iframe id="player"
                src="https://www.youtube.com/embed/9Poo70B4oCM?enablejsapi=1&amp;version=3&amp;playerapiid=ytplayer&amp;autoplay=1&amp;mute=1"
                title="YouTube video player" frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen></iframe>
    </div>
    <br/>
    <button onclick="player.playVideo();">Play</button>
    <button onclick="player.pauseVideo();">pause</button>
    <button onclick="player.stopVideo();">Stop</button>
</div>

<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>
<script>
	// https://developers.google.com/youtube/iframe_api_reference
    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

    // 동영상이 준비되면 실행
    function onPlayerReady(event) {
        // event.target.playVideo();
        console.log('load');
    }

    // 동영상 상태 변화
    function onPlayerStateChange(event) {
        // console.log(player.getPlayerState());
        // -1 시작되지않음, 0 종료, 1 재생중, 2 일시중지, 3 버퍼링, 5 동영상 신호
        if (player.getPlayerState() === 1) console.log('playing');
        else if (player.getPlayerState() === 2) console.log('pause');

        // 상태값
        // event.data == YT.PlayerState.ENDED ? 'end' :
        // event.data == YT.PlayerState.PLAYING ? 'playing' :
        // event.data == YT.PlayerState.PAUSED ? 'stop' :
        // event.data == YT.PlayerState.BUFFERING ? 'buffering' :
        // event.data == YT.PlayerState.CUED ? 'playready' :
        // event.data == -1 ? 'not start' : 'error';
    }
</script>
</body>
</html>